# modelviewer-wppl
**modelviewer-wppl**はwordpressで作成したWebサイトに3Dモデルを表示するためのプラグインです。

その実態は、ブラウザ上で3Dモデルを表示できるWebコンポーネントである[&lt;model-viewer>](https://modelviewer.dev/)のラッパーコードです。

# 主要機能
##  3Dモデルのデータファイルをアプロード可能にする

wordpressのメディアアップローダで3Dモデルのデータファイルを選択可能にします。
<br>

対応フォーマットは以下のとおりです。

| フォーマット | MIMEタイプ         | 拡張子 | 備考 |
| ----------- | ----------------- | ------ | --- |
| GLTF        | model/gltf+json   | .gltf  | テキストベースのglTFデータ形式 |
| GLB         | model/gltf-binary | .glb   | バイナリベースのglTFデータ形式 |

GLTFは3Dモデルのデータフォーマットの1つで、Web上で3Dコンテンツを効率的に表示するためのオープンスタンダードであり、&lt;model-viewer>はGLTF形式を推奨しています。

なお、最初に3Dモデルファイルをアップロードした時点でwordpressのuploadsフォルダ下にmodelフォルダを作成します。<br>
```
[root folder]/wp-content/uploads/model
```
アップロードした3Dモデルファイルは全てmodelフォルダに格納されます。<br>
重複する名前のファイルは自動的に連番が割り振られます。

##  &lt;model-viewer>を使用して3Dモデルを表示可能にする

&lt;model-viewer>は、Webブラウザ上で3Dモデルを表示することができます。具体的には、以下のような機能があります。

* 様々な3Dモデルフォーマット（GLTF, OBJ, FBXなど）に対応
* リアルタイムレンダリング、アニメーション、照明、環境マッピング、物理ベースレンダリングなどの機能を提供
* 様々な表示オプション（スピン、ズーム、カメラアングル、背景、レンダリング設定など）をカスタマイズ可能
* クリック、ドラッグ、ピンチジェスチャーなどのインタラクションに対応
* スマートフォンのAR機能に対応し、ARコンテンツを作成可能

これらの機能を活用することで、Webサイトやモバイルアプリケーション上で、高品質な3Dコンテンツを表示することができます。

詳細は[公式ドキュメント](https://modelviewer.dev/)をご覧ください。

わたしのブログでも解説をおこなっています。[まわすブログ](https://mawasu-blog.com/)

##  投稿ページでメディア追加時に自動的にショートコードを挿入する（旧エディタのみ）

投稿ページで「メディアを追加」から3Dモデルを選択すると、自動的にショートコードを挿入します。<br>

```
[model-viewer src=modelfile.glb auto-rotate camera-controls]
```

Webページに3Dモデルを表示するだけならデフォルトのままで使用可能です。

&lt;model-viewer>タグをダイレクトに使用するのとの違いは、srcに3Dモデルファイルのフルパス(URL)を入れる必要がないことです。

引数の解説
| 引数 | 機能 |
| --- | --- |
| auto-rotate | 3DモデルをWebページに表示した際に、自動的に回転させます |
| camera-controls | Webページ上でマウス、指を使って3Dモデルを回転・拡大／縮小等ができるようになります |

# インストール方法

1. GitHubからこのプラグインをZIP形式でダウンロード
2. wordpressのプラグインの新規追加ページで「プラグインをアップロード」を選択し、1でダウンロードしたファイルを選択
3. インストールが完了したら有効化

# その他

Webページ上に表示した3Dビューに機能を追加したり、デザインを変更したい場合は、assets内のJSとCSSを変更してください。

***!注意 !<br>変更を加えたのち、当プラグインを再インストール・更新する場合、ファイルが上書きされる恐れがあります。事前にバックアップをとっておいてください。***
